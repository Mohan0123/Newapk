<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ranginx Creator Studio v8.1 (Fixes Applied)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- ADMIN PANEL STYLES --- */
        :root {
            --bg: #09090b; --surf: #18181b; --border: #27272a;
            --primary: #e50914; --text: #e4e4e7; --muted: #a1a1aa;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar */
        .sidebar { width: 260px; background: #000; border-right: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; }
        .brand { color: var(--primary); font-size: 22px; font-weight: 800; margin-bottom: 30px; letter-spacing: 1px; }
        .menu-btn { padding: 12px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; color: var(--muted); font-weight: 600; font-size: 14px; transition: 0.2s; }
        .menu-btn:hover, .menu-btn.active { background: var(--surf); color: #fff; }
        .menu-btn.active { border-left: 3px solid var(--primary); }

        /* Main Content */
        .main { flex: 1; display: flex; flex-direction: column; }
        .top-bar { height: 60px; border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 30px; font-weight: 700; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); justify-content: space-between; }
        .scroll-view { flex: 1; overflow-y: auto; padding: 30px; }
        .container { max-width: 900px; margin: 0 auto; }

        /* Forms */
        .card { background: var(--surf); padding: 25px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 25px; }
        .sec-title { font-size: 12px; text-transform: uppercase; color: var(--muted); margin-bottom: 20px; font-weight: 700; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full { grid-column: span 2; }

        label { display: block; margin-bottom: 8px; font-size: 13px; color: #ccc; font-weight: 600; }
        input, textarea { width: 100%; background: #09090b; border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 6px; font-family: inherit; transition: 0.3s; font-size: 14px; }
        input:focus, textarea:focus { border-color: var(--primary); }
        textarea { height: 100px; resize: vertical; }
        .helper { font-size: 11px; color: var(--muted); margin-top: 5px; font-style: italic; }

        /* Episode Manager */
        .ep-box { background: #000; padding: 15px; border-radius: 8px; border: 1px dashed var(--border); }
        .ep-list { margin-top: 15px; max-height: 200px; overflow-y: auto; }
        .ep-item { display: flex; justify-content: space-between; background: var(--surf); padding: 8px 12px; margin-bottom: 5px; border-radius: 4px; font-size: 13px; align-items: center; border: 1px solid var(--border); }
        .del-btn { color: #ef4444; cursor: pointer; font-weight: bold; padding: 5px; }

        /* Buttons */
        .btn-row { display: flex; gap: 15px; margin-top: 20px; }
        .btn { flex: 1; padding: 14px; border: none; border-radius: 6px; font-weight: 700; cursor: pointer; text-transform: uppercase; font-size: 13px; letter-spacing: 1px; }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-secondary { background: #333; color: #fff; }
        .btn-add { background: var(--primary); color: #fff; padding: 0 20px; border-radius: 6px; font-weight: 700; cursor: pointer; border: none; }

        /* Output */
        .output-area { display: none; margin-top: 40px; border-top: 1px dashed var(--border); padding-top: 30px; }
        .code-box { background: #000; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 20px; overflow: hidden; }
        .box-head { background: #111; padding: 10px 15px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; font-size: 12px; font-weight: 700; color: var(--muted); }
        .copy-btn { background: var(--surf); color: #fff; padding: 6px 12px; border-radius: 4px; border: 1px solid var(--border); cursor: pointer; font-size: 11px; font-weight: 600; }
        pre { padding: 15px; color: #4cd137; overflow-x: auto; font-family: monospace; font-size: 12px; max-height: 300px; }

        .tab-panel { display: none; }
        .tab-panel.active { display: block; }
        
        @media (max-width: 768px) { .sidebar{width:70px;padding:15px 10px} .brand span, .menu-btn span{display:none} .brand{margin-bottom:20px;font-size:18px} .grid{grid-template-columns:1fr} }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="brand">RANGINX <span>v8.1</span></div>
    <div class="menu-btn active" onclick="switchTab('movie')">üé¨ <span>Movie</span></div>
    <div class="menu-btn" onclick="switchTab('series')">üì∫ <span>Series</span></div>
</div>

<div class="main">
    <div class="top-bar">
        <span id="pageTitle">Movie Generator</span>
        <a href="/" class="btn-secondary" style="padding:8px 15px; border-radius:4px; font-size:12px; text-decoration:none; color:white;">üè† HOME</a>
    </div>
    
    <div class="scroll-view">
        <div class="container">
            
            <div id="tab-movie" class="tab-panel active">
                <div class="card">
                    <div class="sec-title">Movie Details</div>
                    <div class="grid">
                        <div class="full">
                            <label>Slug (File Name) - *Required*</label>
                            <input type="text" id="mSlug" placeholder="e.g. pathaan-full-movie" oninput="autoTitle('m')" style="color:var(--primary); font-weight:bold;">
                        </div>
                        <div class="full">
                            <label>Movie Title (Auto-fill)</label>
                            <input type="text" id="mTitle" placeholder="Auto-filled from slug">
                        </div>
                        <div class="full">
                            <label>Video URL (MP4 / Embed)</label>
                            <input type="text" id="mVideo" placeholder="https://...">
                        </div>
                        <div>
                            <label>Thumbnail (16:9 Landscape)</label>
                            <input type="text" id="mPoster" placeholder="https://...">
                        </div>
                        <div>
                            <label>Tags (Comma separated)</label>
                            <input type="text" id="mTags" placeholder="Action, Drama, HD">
                        </div>
                        <div class="full">
                            <label>Storyline / Description (Auto-fill)</label>
                            <textarea id="mDesc" placeholder="Auto-filled if empty"></textarea>
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-primary" onclick="generate('movie')">Generate Code</button>
                        <button class="btn btn-secondary" onclick="resetForm('m')">Reset</button>
                    </div>
                </div>
            </div>

            <div id="tab-series" class="tab-panel">
                <div class="card">
                    <div class="sec-title">Series Details</div>
                    <div class="grid">
                         <div class="full">
                            <label>Slug (File Name) - *Required*</label>
                            <input type="text" id="sSlug" placeholder="e.g. farzi-season-1" oninput="autoTitle('s')" style="color:var(--primary); font-weight:bold;">
                        </div>
                        <div class="full">
                            <label>Series Title (Auto-fill)</label>
                            <input type="text" id="sTitle" placeholder="Auto-filled from slug">
                        </div>
                        <div>
                            <label>Thumbnail (16:9 Landscape)</label>
                            <input type="text" id="sPoster" placeholder="https://...">
                        </div>
                        <div>
                            <label>Tags</label>
                            <input type="text" id="sTags" placeholder="Web Series, Thriller">
                        </div>
                        
                        <div class="full ep-box">
                            <label style="margin-bottom:10px">Episode Manager</label>
                            <div style="display:flex; gap:10px;">
                                <input type="text" id="epName" placeholder="Ep 1" style="width:30%">
                                <input type="text" id="epUrl" placeholder="Video URL">
                                <button class="btn-add" onclick="addEpisode()">ADD</button>
                            </div>
                            <div id="epList" class="ep-list"></div>
                        </div>

                        <div class="full">
                            <label>Storyline (Auto-fill)</label>
                            <textarea id="sDesc" placeholder="Auto-filled if empty"></textarea>
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-primary" onclick="generate('series')">Generate Code</button>
                        <button class="btn btn-secondary" onclick="resetForm('s')">Reset</button>
                    </div>
                </div>
            </div>

            <div id="outputArea" class="output-area">
                <div class="code-box">
                    <div class="box-head">
                        <span>JSON Data (Append to list)</span>
                        <button class="copy-btn" onclick="copyText('jsonOut')">COPY JSON</button>
                    </div>
                    <pre id="jsonOut"></pre>
                </div>

                <div class="code-box">
                    <div class="box-head">
                        <span>HTML Code</span>
                        <div style="display:flex; gap:10px">
                            <button class="copy-btn" onclick="copyText('htmlOut')">COPY HTML</button>
                            <button class="copy-btn" style="background:var(--primary);border:none" onclick="downloadHtml()">DOWNLOAD</button>
                        </div>
                    </div>
                    <pre id="htmlOut"></pre>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    let episodes = [];
    let currentSlug = "";

    function switchTab(t) {
        document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
        event.currentTarget.classList.add('active');
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        document.getElementById('tab-'+t).classList.add('active');
        document.getElementById('pageTitle').innerText = t === 'movie' ? 'Movie Generator' : 'Web Series Generator';
        document.getElementById('outputArea').style.display = 'none';
    }

    function autoTitle(p) {
        // Optional: Auto-fill logic can go here
    }

    function performAutoFill(prefix, type) {
        let slugField = document.getElementById(prefix + 'Slug');
        let titleField = document.getElementById(prefix + 'Title');
        let descField = document.getElementById(prefix + 'Desc');

        let slug = slugField.value.trim().toLowerCase().replace(/[^a-z0-9-]/g, '-');
        slugField.value = slug; // Normalize Slug in Input

        if (!slug) return alert("Slug is required for auto-generation!");

        if (!titleField.value.trim()) {
            let autoTitle = slug.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            titleField.value = autoTitle;
        }

        if (!descField.value.trim()) {
            let title = titleField.value;
            let autoDesc = "";
            if (type === 'movie') {
                autoDesc = `Watch ${title} in full HD quality exclusively on Ranginx. Stream this movie online for free. Discover the best of bollywood and hollywood movies.`;
            } else {
                autoDesc = `Stream all episodes of ${title} web series in HD on Ranginx. Binge-watch the complete season online for free.`;
            }
            descField.value = autoDesc;
        }
    }

    function addEpisode() {
        let n = document.getElementById('epName').value;
        let u = document.getElementById('epUrl').value;
        if(!n || !u) return alert("Enter Ep Name & URL");
        episodes.push({name:n, url:u});
        renderEp();
        document.getElementById('epName').value = ""; document.getElementById('epUrl').value = "";
    }

    function renderEp() {
        let h = "";
        episodes.forEach((e,i) => {
            h += `<div class="ep-item"><span>${e.name}</span> <span class="del-btn" onclick="delEp(${i})">√ó</span></div>`;
        });
        document.getElementById('epList').innerHTML = h || '<div style="text-align:center;color:#555;font-size:12px;padding:10px">No episodes</div>';
    }
    function delEp(i) { episodes.splice(i,1); renderEp(); }
    function resetForm(p) {
        document.querySelectorAll(`#tab-${p==='m'?'movie':'series'} input, textarea`).forEach(e=>e.value='');
        if(p==='s') { episodes=[]; renderEp(); }
    }

    function generate(type) {
        let p = type === 'movie' ? 'm' : 's';
        performAutoFill(p, type);

        let d = getData(p);
        if(!d.title || !d.slug) return alert("Title and Slug are required!");

        let playerHtml = "", extrasHtml = "";

        if (type === 'movie') {
            if(!d.video) return alert("Video URL required!");
            playerHtml = getPlayer(d.video, d.poster);
        } else {
             if(episodes.length===0) return alert("Add Episodes!");
             extrasHtml = buildSeriesExtras(d.poster);
             playerHtml = getPlayer(episodes[0].url, d.poster, true);
        }
        
        let html = buildTemplate(d, playerHtml, extrasHtml, d.poster);
        let json = JSON.stringify({ title: d.title, slug: d.slug, thumbnail: d.poster, type: type }, null, 2) + ",";
        
        showOutput(html, json, d.slug);
    }

    function getData(p) {
        return {
            title: document.getElementById(p+'Title').value,
            slug: document.getElementById(p+'Slug').value,
            video: document.getElementById(p==='m'?'mVideo':'epUrl').value, 
            poster: document.getElementById(p+'Poster').value,
            tags: document.getElementById(p+'Tags').value,
            desc: document.getElementById(p+'Desc').value.replace(/"/g, '&quot;')
        };
    }

    function getPlayer(url, poster, id=false) {
        let isMp4 = url.trim().includes('.mp4') || url.trim().includes('.mkv');
        let style = `width:100%;height:100%;object-fit:contain;background:#000;`;
        let vidId = id ? 'id="main-player"' : '';
        
        // Fix: Removed autoplay to prevent layout shift issues, user must tap to play
        if(isMp4) return `<video ${vidId} controls playsinline preload="metadata" poster="${poster}" referrerpolicy="no-referrer" style="${style}"><source src="${url}"></video>`;
        return `<iframe ${vidId} src="${url}" allowfullscreen style="${style};border:none"></iframe>`;
    }

    function buildSeriesExtras(poster) {
        let btns = `<div class="ep-box-out"><div class="ep-head">Episodes</div><div class="ep-grid">`;
        episodes.forEach((e,i) => {
            let mp4 = e.url.includes('.mp4');
            btns += `<button class="ep-btn ${i===0?'active':''}" onclick="playEp('${e.url}', ${mp4}, this)">${i+1}</button>`;
        });
        btns += `</div></div>`;

        let sc = `
        <script>
        function playEp(u,m,b){
            document.querySelectorAll('.ep-btn').forEach(x=>x.classList.remove('active'));
            b.classList.add('active');
            let c=document.getElementById('video-box');
            if(m) c.innerHTML=\`<video controls autoplay playsinline style="width:100%;height:100%;object-fit:contain;background:#000;"><source src="\${u}"></video>\`;
            else c.innerHTML=\`<iframe src="\${u}" allowfullscreen style="width:100%;height:100%;border:none;background:#000;"></iframe>\`;
        }
        <\/script>
        <style>.ep-box-out{background:#18181b;padding:20px;border-radius:12px;margin-bottom:20px;border:1px solid #27272a}.ep-head{font-weight:700;margin-bottom:15px}.ep-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(50px,1fr));gap:10px}.ep-btn{background:#27272a;border:1px solid #333;color:#fff;padding:12px 0;border-radius:8px;cursor:pointer;font-weight:700}.ep-btn.active{background:#e50914;border-color:#e50914}</style>`;
        return btns + sc;
    }

    function buildTemplate(d, player, extras, poster) {
        let tagsHtml = d.tags ? d.tags.split(',').map(t => `<span class="tag">${t.trim()}</span>`).join('') : '';

        return `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Watch ${d.title} Full HD - Ranginx</title>
<meta name="description" content="${d.desc.substring(0,150)}...">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://ranginx.fun/movies/${d.slug}.html">
<meta property="og:image" content="${poster}">
<meta property="og:title" content="${d.title}">
<meta property="og:type" content="video.movie">
<meta property="og:url" content="https://ranginx.fun/movies/${d.slug}.html">
<meta property="og:site_name" content="Ranginx">
<meta name="twitter:card" content="summary_large_image">
<meta name="rating" content="RTA-5042-1996-1400-1577-RTA">
<meta name="audience" content="adult">
<meta name="adult" content="true">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="/ads/movie-ads.js" defer><\/script>
<script src="/ads/popunder.js" defer><\/script>
<style>
:root{--bg:#050505;--card:#121212;--p:#E50914;--t:#fff;--m:#aaa}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--t);line-height:1.5}
a{text-decoration:none;color:inherit}
header{padding:15px 20px;display:flex;justify-content:space-between;align-items:center;background:#000;position:sticky;top:0;z-index:99;border-bottom:1px solid #222}
.logo{color:var(--p);font-weight:800;font-size:24px;text-transform:uppercase}
.home-btn{padding:8px 16px;background:var(--card);border:1px solid #333;border-radius:20px;font-size:12px;font-weight:600;color:#fff}
.container{max-width:1200px;margin:0 auto;padding:0}
.video-area{position:relative;width:100%;background:#000;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center}
.content-pad{padding:20px}
h1{font-size:22px;margin-bottom:5px;font-weight:700}
.meta-row{display:flex;gap:10px;align-items:center;margin-bottom:20px;font-size:12px;color:var(--m)}
.badge{background:#333;color:#fff;padding:2px 6px;border-radius:4px;font-weight:600}
/* Storyline Card */
.story-card{background:var(--card);padding:20px;border-radius:12px;margin-bottom:20px;border:1px solid #222}
.card-head{display:flex;align-items:center;gap:8px;color:var(--p);font-weight:700;margin-bottom:10px;font-size:15px}
.desc-text{color:#ccc;font-size:14px;line-height:1.6;margin-bottom:15px}
.tags{display:flex;flex-wrap:wrap;gap:8px}
.tag{background:#222;border:1px solid #333;padding:5px 12px;border-radius:50px;font-size:11px;color:#ccc}
/* Social Buttons Fixed */
.social-row{display:flex;gap:12px;margin-bottom:20px}
.soc-btn{flex:1;height:45px;display:flex;align-items:center;justify-content:center;background:var(--card);border:1px solid #333;border-radius:8px;font-weight:700;font-size:14px;cursor:pointer;color:white;transition:0.2s}
.tg{color:#38bdf8;border-color:rgba(56,189,248,0.3)}
.wa{color:#4ade80;border-color:rgba(74,222,128,0.3)}
.cp{background:#7c3aed;border-color:#7c3aed;color:white}
.soc-btn:hover{filter:brightness(1.2)}
/* Ads Auto Hide */
.ad-box{width:100%;background:#000;display:flex;align-items:center;justify-content:center;margin:20px 0}
.ad-box:empty{display:none}
/* Related */
.related-sec{padding:0 20px 40px 20px}
.sec-title{font-weight:700;margin-bottom:15px;border-left:4px solid var(--p);padding-left:10px}
.rel-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}
.rel-card{display:block;border-radius:8px;overflow:hidden;background:var(--card)}
.rel-img{width:100%;aspect-ratio:16/9;object-fit:cover;background:#111}
.rel-title{padding:10px;font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.load-more{width:100%;padding:15px;background:var(--card);border:1px solid #333;color:#fff;font-weight:700;margin-top:20px;border-radius:8px;cursor:pointer}
footer{background:#000;padding:40px;text-align:center;font-size:12px;color:#555}
@media(min-width:768px){ .container{display:grid;grid-template-columns:7fr 3fr;gap:30px;padding:30px} .video-area{border-radius:12px;overflow:hidden;margin-top:20px} .content-pad{padding:0;margin-top:20px} .rel-grid{grid-template-columns:1fr} }
</style>
</head>
<body>
<header>
    <div class="logo">RANGINX</div>
    <a href="/" class="home-btn">üè† HOME</a>
</header>

<div class="video-area" id="video-box">${player}</div>

<div class="container">
    <div class="main-col">
        <div class="content-pad">
            <h1>${d.title}</h1>
            <div class="meta-row">
                <span class="badge">HD</span>
                <span>Streaming</span>
                <span>Free</span>
            </div>

            <div class="social-row">
                 <a href="https://t.me/share/url?url=https://ranginx.fun/movies/${d.slug}.html" target="_blank" class="soc-btn tg">Telegram</a>
                 <a href="https://api.whatsapp.com/send?text=Watch: https://ranginx.fun/movies/${d.slug}.html" target="_blank" class="soc-btn wa">WhatsApp</a>
                 <button class="soc-btn cp" onclick="copyLink()">Copy Link</button>
            </div>

            <div id="ad-banner" class="ad-box"></div>

            ${extras}

            <div class="story-card">
                <div class="card-head">üìñ Storyline</div>
                <div class="desc-text">${d.desc}</div>
                <div class="tags">${tagsHtml}</div>
            </div>
        </div>
    </div>

    <div class="side-col">
        <div class="related-sec">
            <div class="sec-title">You May Also Like</div>
            <div class="rel-grid" id="related-grid"></div>
            <button class="load-more" id="loadBtn" onclick="loadNextBatch()">Load More</button>
            
            <div id="ad-sidebar" class="ad-box"></div>
        </div>
    </div>
</div>

<footer>
    ¬© 2025 Ranginx. All rights reserved.<br>
    <a href="/dmca.html" style="color:#777;margin:0 5px">DMCA</a>
    <a href="/terms.html" style="color:#777;margin:0 5px">Terms</a>
    <a href="/privacy.html" style="color:#777;margin:0 5px">Privacy</a>
</footer>

<script>
function copyLink(){
    let t=document.createElement("textarea"); t.value=window.location.href; t.style.position="fixed";
    document.body.appendChild(t); t.select(); document.execCommand("copy"); document.body.removeChild(t);
    alert("Link Copied!");
}

let allData = []; let currentIndex = 0; const itemsPerPage = 6; const currentSlug = "${d.slug}";

document.addEventListener("DOMContentLoaded", ()=>{
    const grid = document.getElementById('related-grid');
    // Fallback data for local testing
    const fallback = [
        {title:"Demo Movie 1", slug:"#", thumbnail:"https://via.placeholder.com/300x170/333/fff?text=Demo1"},
        {title:"Demo Movie 2", slug:"#", thumbnail:"https://via.placeholder.com/300x170/333/fff?text=Demo2"}
    ];

    fetch('/data/movies.json')
    .then(r=>{if(!r.ok)throw new Error();return r.json()})
    .then(d=>{
        allData = d.filter(m=>m.slug !== currentSlug);
        if(allData.length === 0) {
             grid.innerHTML = '<div style="padding:10px;color:#555">No related content found</div>';
             document.getElementById('loadBtn').style.display='none';
        } else {
             loadNextBatch();
        }
    })
    .catch(()=>{
        console.log("Local Mode: Using Fallback");
        grid.innerHTML = fallback.map(m=>\`<a href="#" class="rel-card"><img src="\${m.thumbnail}" class="rel-img"><div class="rel-title">\${m.title}</div></a>\`).join('');
        document.getElementById('loadBtn').style.display='none';
    });
});

function loadNextBatch() {
    const grid = document.getElementById('related-grid');
    const btn = document.getElementById('loadBtn');
    let nextBatch = allData.slice(currentIndex, currentIndex + itemsPerPage);
    
    nextBatch.forEach(m => {
        grid.innerHTML += \`<a href="/movies/\${m.slug}.html" class="rel-card"><img src="\${m.thumbnail}" class="rel-img" loading="lazy"><div class="rel-title">\${m.title}</div></a>\`;
    });
    currentIndex += itemsPerPage;
    if(currentIndex >= allData.length) btn.style.display = 'none';
}
<\/script>
</body>
</html>`;
    }

    function showOutput(h,j,s) {
        currentSlug = s;
        document.getElementById('htmlOut').textContent = h;
        document.getElementById('jsonOut').textContent = j + ","; 
        document.getElementById('outputArea').style.display = 'block';
        document.getElementById('outputArea').scrollIntoView({behavior:'smooth'});
    }

    function copyText(id){
        let t=document.getElementById(id).textContent;
        let ta=document.createElement("textarea");
        ta.value=t; ta.style.position="fixed"; document.body.appendChild(ta);
        ta.select(); document.execCommand("copy"); document.body.removeChild(ta);
        alert("Copied!");
    }

    function downloadHtml(){
        if(!currentSlug) return alert("Generate first!");
        let b=new Blob([document.getElementById('htmlOut').textContent],{type:'text/html'});
        let a=document.createElement('a');
        a.href=URL.createObjectURL(b);
        a.download=currentSlug+".html";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }
</script>
</body>
</html>